window.__require=function e(t,o,c){function i(s,a){if(!o[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var h="function"==typeof __require&&__require;if(!a&&h)return h(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var l=o[s]={exports:{}};t[s][0].call(l.exports,function(e){return i(t[s][1][e]||e)},l,l.exports,e,t,o,c)}return o[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<c.length;s++)i(c[s]);return i}({block:[function(e,t){"use strict";cc._RF.push(t,"abd535V9VRCVIsOFtrle6kt","block"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(e){this.block_type=e,this.can_pz=!0,this.is_pz=!1,(e>=11||e<=0)&&(this.can_pz=!1),this.i_over=0},onBeginContact:function(e,t,o){11!=o.tag&&(this.is_pz=!0);var c=o.node.getComponent("block");if(c&&this.can_pz&&c.can_pz&&this.block_type==c.block_type){this.can_pz=!1,c.can_pz=!1;var i=this.node.getPosition(),n=o.node.getPosition(),s=i;s.y>n.y&&(s=n),this.node.removeFromParent(),o.node.removeFromParent(),game.playSound();var a=this.node.width;if(game.createTx(this.block_type,i,a),game.createTx(this.block_type,n,a),1==game.i_game)game.addScore(this.block_type);else{var r=11-this.block_type;game.addScore(r)}this.scheduleOnce(function(){1==game.i_game?game.createBlock(this.block_type+1,s,!0):game.createBlock(this.block_type-1,s,!0)}.bind(this),.15)}},onEndContact:function(){},onPreSolve:function(){},onPostSolve:function(){},update:function(){game.is_over||(this.node.y+this.node.height*game.f_scale/2>game.node_xian.y?(this.i_over++,this.i_over>120&&game.gameOver()):this.i_over=0)}}),cc._RF.pop()},{}],game:[function(e,t){"use strict";cc._RF.push(t,"f0043cW/o1BGJvxtmvPNpyZ","game"),cc.Class({extends:cc.Component,properties:{block_show:{type:cc.Node,default:null},block_arr:{type:[cc.Prefab],default:[]},label_score:{type:cc.Label,default:null},pre_tx:{type:cc.Prefab,default:null},node_xian:{type:cc.Node,default:null},layerOver:{type:cc.Node,default:null},audoi_pz:{type:cc.AudioClip,default:null}},onLoad:function(){console.log("onLoad"),window.game=this,this.i_game=1,this.arr_num_1=[1,2,3,4,5],this.arr_num_2=[6,7,8,9],this.init(),this.setTouch(),cc.director.getPhysicsManager().enabled=!0},showName:function(){var e=this.node.getChildByName("label_name"),t=this.node.getChildByName("btn_game");1==this.i_game?(e.getComponent(cc.Label).string="\u5408\u6210\u5929\u5973",t.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u53cd\u5411\u5408\u6210"):(e.getComponent(cc.Label).string="\u53cd\u5411\u5408\u6210",t.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string="\u5408\u6210\u5929\u5973")},init:function(){this.num_buShu=0,this.block_show.active=!1,this.node_xian.active=!1,this.layerOver.active=!1,this.layerOver.zIndex=9,this.f_scale=.6,this.block_show.scale=this.f_scale,this.score_curr=0,this.f_xian=300,this.is_over=!1,this.label_score.string=this.score_curr,1==this.i_game?this.block_random=1:this.block_random=10,this.showBlock(),this.cleanAllBlocks(),this.showName()},playSound:function(){cc.audioEngine.play(this.audoi_pz,!1,1)},setTouch:function(){this.node.on("touchstart",function(e){if(0!=this.block_show.active&&!this.is_over){var t=e.getLocation();t=this.node.convertToNodeSpaceAR(t),this.block_show.x=t.x}},this),this.node.on("touchmove",function(e){if(0!=this.block_show.active&&!this.is_over){var t=e.getLocation();t=this.node.convertToNodeSpaceAR(t),this.block_show.x=t.x}},this),this.node.on("touchend",function(){if(0!=this.block_show.active&&!this.is_over){this.block_show.active=!1;var e=this.block_show.getPosition();if(this.createBlock(this.block_random,e,!1),1==this.i_game){var t=this.arr_num_1.length,o=Math.floor(Math.random()*t);this.block_random=this.arr_num_1[o],this.num_buShu<=1&&(this.block_random=1)}else t=this.arr_num_2.length,o=Math.floor(Math.random()*t),this.block_random=this.arr_num_2[o],this.num_buShu<=1&&(this.block_random=10);this.scheduleOnce(function(){this.showBlock()}.bind(this),1)}},this),this.node.on("touchcancel",function(){if(console.log("touchcancel"),0!=this.block_show.active&&!this.is_over){this.block_show.active=!1;var e=this.block_show.getPosition();if(this.createBlock(this.block_random,e,!1),1==this.i_game){var t=this.arr_num_1.length,o=Math.floor(Math.random()*t);this.block_random=this.arr_num_1[o],this.num_buShu<=1&&(this.block_random=1)}else t=this.arr_num_2.length,o=Math.floor(Math.random()*t),this.block_random=this.arr_num_2[o],this.num_buShu<=1&&(this.block_random=10);this.scheduleOnce(function(){this.showBlock()}.bind(this),1)}},this)},showBlock:function(){this.block_show.active=!0,this.block_show.setPosition(cc.v2(0,530));for(var e=this.block_show.children,t=0;t<e.length;t++)e[t].name==this.block_random?e[t].active=!0:e[t].active=!1;this.block_show.scale=0;var o=cc.scaleTo(.15,this.f_scale);this.block_show.runAction(o)},createBlock:function(e,t,o){this.num_buShu++;var c=cc.instantiate(this.block_arr[e]);if(c.parent=this.node,c.scale=this.f_scale,c.setPosition(t),c.getComponent("block").init(e),o){c.scale=.3;var i=cc.scaleTo(.12,this.f_scale);c.runAction(i)}},createTx:function(e,t,o){var c=cc.instantiate(this.pre_tx);c.parent=this.node,c.scale=0,c.zIndex=3,c.width=o,c.height=o,c.setPosition(t),1==e?c.color=new cc.Color(110,16,100):2==e?c.color=new cc.Color(255,9,36):3==e?c.color=new cc.Color(253,111,1):4==e?c.color=new cc.Color(255,230,23):5==e?c.color=new cc.Color(93,222,31):6==e?c.color=new cc.Color(229,25,50):7==e?c.color=new cc.Color(245,159,98):8==e?c.color=new cc.Color(255,225,69):9==e?c.color=new cc.Color(205,201,189):10==e&&(c.color=new cc.Color(248,64,100));var i=cc.scaleTo(.16,1),n=cc.callFunc(function(){c.removeFromParent()}),s=cc.sequence(i,n);c.runAction(s)},addScore:function(e){this.score_curr=this.score_curr+e,this.label_score.string=this.score_curr},showXian:function(){for(var e=!1,t=this.node.children,o=0;o<t.length;o++){var c=t[o].getComponent("block");if(c&&c.is_pz&&t[o].y+t[o].height/2*this.f_scale>this.f_xian){e=!0;break}}this.node_xian.active=!!e},gameOver:function(){var e=this;this.node_xian.active=!1,this.block_show.active=!1,this.layerOver.getChildByName("label_score").getComponent(cc.Label).string=this.score_curr;var t=cc.sys.localStorage.getItem("num_bestScore");t||(t=0),t<this.score_curr&&(t=this.score_curr),this.layerOver.getChildByName("label_bestScore").getComponent(cc.Label).string=t,cc.sys.localStorage.setItem("num_bestScore",t);var o=0;this.is_over=!0;for(var c=this.node.children,i=function(t){c[t].getComponent("block")&&(o<(s=.1+.025*t)&&(o=s),a=cc.delayTime(s),r=cc.callFunc(function(){var e=c[t].getComponent("block").block_type,o=c[t].getPosition(),i=c[t].width;this.createTx(e,o,i),this.addScore(e),c[t].active=!1},e),h=cc.sequence(a,r),c[t].runAction(h))},n=0;n<c.length;n++){var s,a,r,h;i(n)}this.scheduleOnce(function(){this.layerOver.active=!0},o+.1)},cleanAllBlocks:function(){for(var e=this.node.children,t=e.length-1;t>=0;t--)e[t].getComponent("block")&&e[t].removeFromParent()},btnCallBack:function(e,t){"btn_rePlay"==t?this.init():"btn_game"==t&&(1==this.i_game?this.i_game=2:this.i_game=1,this.init()),"btn_Play1"==t&&cc.director.loadScene("game"),"btn_Play1_1"==t&&cc.director.loadScene("baibai-1"),"btn_Play1_2"==t&&cc.director.loadScene("qianqian-2"),"btn_Play1_3"==t&&cc.director.loadScene("lazong-3"),"btn_Play1_4"==t&&cc.director.loadScene("gege-4"),"btn_Play1_5"==t&&cc.director.loadScene("xinyi-5"),"btn_Play1_6"==t&&cc.director.loadScene("nana-6"),"btn_Play1_7"==t&&cc.director.loadScene("babi-7"),"btn_Play1_8"==t&&cc.director.loadScene("beila-8")}}),cc._RF.pop()},{}]},{},["block","game"]);